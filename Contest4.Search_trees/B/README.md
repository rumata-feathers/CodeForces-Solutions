# B. Splay-tree

## url: https://codeforces.com/group/PVbQ8eK2T4/contest/357142/problem/B

### B. Splay-дерево

ограничение по времени на тест3 секунды

ограничение по памяти на тест256 мегабайт

вводстандартный ввод

выводстандартный вывод


Реализуйте splay-дерево, которое поддерживает множество 𝑆 целых чисел, в котором разрешается производить следующие операции:

- 𝑎𝑑𝑑(𝑖) — добавить в множество 𝑆 число 𝑖 (если он там уже есть, то множество не меняется);
- 𝑠𝑢𝑚(𝑙,𝑟) — вывести сумму всех элементов 𝑥 из 𝑆, которые удовлетворяют неравенству 𝑙≤𝑥≤𝑟.


Решения, не использующие splay-деревья, будут игнорироваться.


Решения, не использующие операции split и merge, будут оцениваться в 2 балла. Решения, использующие операции split и merge, оцениваются в 3 балла.



Входные данные

Исходно множество 𝑆 пусто. Первая строка входного файла содержит 𝑛 — количество операций (1≤𝑛≤300000). Следующие 𝑛 строк содержат операции. Каждая операция имеет вид либо «+ 𝑖», либо «? 𝑙 𝑟». Операция «? 𝑙 𝑟» задает запрос 𝑠𝑢𝑚(𝑙,𝑟).


Если операция «+ 𝑖» идет во входном файле в начале или после другой операции «+», то она задает операцию 𝑎𝑑𝑑(𝑖). Если же она идет после запроса «?», и результат этого запроса был 𝑦, то выполняется операция 𝑎𝑑𝑑((𝑖+𝑦)mod109).


Во всех запросах и операциях добавления параметры лежат в интервале от 0 до 109.


Выходные данные

Для каждого запроса выведите одно число — ответ на запрос.
